<!--**********************  FWMAV Simulation  *************************
* Version 0.3
* Fan Fei		Jan 2018
* FWMAV simulation with dual motor driven robotic flapper
* PID controller using split cycle mechanism
********************************************************************-->

<?xml version="1.0"?>
<robot name="flapper_sc">

	<material name = "flapper/black">
		<color rgba = "0 0 0 1"/>
	</material>

	<material name = "flapper/blue">
		<color rgba = "0.0 0.0 1.0 1"/>
	</material>

	<material name = "flapper/red">
		<color rgba = "1.0 0.0 0.0 1"/>
	</material>

	<link name = "world"/>

	<!--link name = "ATI"/>

	<joint name = "ATI_to_world" type = "fixed">
		<parent link = "world"/>
		<child link = "ATI"/>
		<origin xyz = "0 0 0" rpy = "0 0 0"/>
	</joint>

	<joint name = "torso_to_ATI" type = "fixed">
		<parent link = "ATI"/>
		<child link = "torso"/>
		<origin xyz = "0 0 0" rpy = "0 0 0"/>
	</joint-->

	<!--for force mapping-->
	<!--joint name = "torso_to_world" type = "fixed">
		<parent link = "world"/>
		<child link = "torso"/>
		<origin xyz = "0 0 0" rpy = "0 0 0"/>
	</joint-->

	<joint name = "torso_to_world" type = "floating">
		<parent link = "world"/>
		<child link = "torso"/>
		<origin xyz = "0 0 0" rpy = "0 0 0"/>
	</joint>

	<!--joint name = "torso_to_world" type = "planar">
		<parent link = "world"/>
		<child link = "torso"/>
		<origin xyz = "0 0 0" rpy = "0 0 0"/>
		<axis xyz = "0 1 0"/>
		<dynamics friction = "0" damping = "0"/>
		<limit lower = "0" upper = "0" effort = "0" velocity = "2000"/>
	</joint-->

	<!--joint name = "torso_to_world" type = "revolute">
		<parent link = "world"/>
		<child link = "torso"/>
		<origin xyz = "0 0 0" rpy = "0 0 0"/>
		<axis xyz = "0 1 0"/>
		<dynamics friction = "0" damping = "0"/>
		<limit lower = "0" upper = "0" effort = "0" velocity = "20000"/>
	</joint-->

	<link name = "torso">
		<inertial>
			<origin xyz = "0 0 0" rpy = "0 0 0"/>
			<mass value = "9.9680E-3"/>
			<inertia
				ixx = "5297.1434E-9"
				iyy = "4859.1393E-9"
				izz = "3666.9307E-9"
				ixy = "0.0706E-9"
				iyz = "-0.0290E-9"
				ixz = "-112.2798E-9"/>
		</inertial>
		<visual>
			<origin xyz = "0 0 0" rpy = "0 0 0"/>
			<geometry>
				<mesh filename = "meshes/torso.STL"/>
			</geometry>
			<material name = "flapper/black"/>
		</visual>
		<collision>
			<origin xyz = "0 0 0" rpy = "0 0 0"/>
			<geometry>
				<mesh filename = "meshes/torso.STL"/>
			</geometry>
		</collision>
	</link>

	<link name = "left_wing">
		<inertial>
			<origin xyz = "0.0169E-3 37.4051E-3 -9.7543E-3" rpy = "0 0 0"/>
			<mass value = "0.0719E-3"/>
			<inertia
				ixx = "23.1552E-9"
				iyy = "2.6696E-9"
				izz = "20.4868E-9"
				ixy = "-0.0126E-9"
				iyz = "0.7294E-9"
				ixz = "0.0012E-9"/>
		</inertial>
		<visual>
			<origin xyz = "0 0 0" rpy = "0 0 0"/>
			<geometry>
				<mesh filename = "meshes/Wing_Camber_70mm_C35mm_no_trailing_L.STL"/>
			</geometry>
			<material name = "flapper/blue"/>
		</visual>
		<collision>
			<origin xyz = "0 0 0" rpy = "0 0 0"/>
			<geometry>
				<mesh filename = "meshes/Wing_Camber_70mm_C35mm_no_trailing_L.STL"/>
			</geometry>
		</collision>
	</link>

	<link name = "right_wing">
		<inertial>
			<origin xyz = "0.0169E-3 -37.4051E-3 -9.7543E-3" rpy = "0 0 0"/>
			<mass value = "0.0719E-3"/>
			<inertia
				ixx = "23.1552E-9"
				iyy = "2.6696E-9"
				izz = "20.4868E-9"
				ixy = "0.0126E-9"
				iyz = "-0.7294E-9"
				ixz = "0.0012E-9"/>
		</inertial>
		<visual>
			<origin xyz = "0 0 0" rpy = "0 0 0"/>
			<geometry>
				<mesh filename = "meshes/right_wing.STL"/>
			</geometry>
			<material name = "flapper/red"/>
		</visual>
		<collision>
			<origin xyz = "0 0 0" rpy = "0 0 0"/>
			<geometry>
				<mesh filename = "meshes/right_wing.STL"/>
			</geometry>
		</collision>
	</link>

	<link name="left_leading_edge">
		<inertial>
			<origin xyz = "-0.2901E-3 2.3354E-3 -6.5310E-3" rpy = "0 0 0"/>
			<mass value = "0.8692E-3"/>
			<inertia
				ixx = "137.1837E-9"
				iyy = "48.7662E-9"
				izz = "95.1275E-9"
				ixy = "0.0887E-9"
				iyz = "13.1085E-9"
				ixz = "-0.4064E-9"/>
		</inertial>
		<visual>
			<origin xyz = "0 0 0" rpy = "0 0 0"/>
			<geometry>
				<mesh filename = "meshes/left_LE.STL"/>
			</geometry>
			<material name = "flapper/blue"/>
		</visual>
	</link>

	<link name="right_leading_edge">
		<inertial>
			<origin xyz = "-0.2901E-3 -2.3354E-3 -6.5310E-3" rpy = "0 0 0"/>
			<mass value = "0.8692E-3"/>
			<inertia
				ixx = "137.1837E-9"
				iyy = "48.7662E-9"
				izz = "95.1275E-9"
				ixy = "-0.0887E-9"
				iyz = "-13.1085E-9"
				ixz = "-0.4064E-9"/>
		</inertial>
		<visual>
			<origin xyz = "0 0 0" rpy = "0 0 0"/>
			<geometry>
				<mesh filename = "meshes/right_LE.STL"/>
			</geometry>
			<material name = "flapper/red"/>
		</visual>
	</link>

	<joint name = "left_stroke" type = "revolute">
		<parent link = "torso"/>
		<child link = "left_leading_edge"/>
		<origin xyz = "0 13.95E-3 23.7357E-3" rpy = "0 0 0"/>
		<axis xyz = "0 0 1"/>
		<dynamics friction = "1E-9" damping = "8E-9"/>
		<limit lower = "-1.57" upper = "1.57" effort = "0.02" velocity = "400"/>
	</joint>

	<joint name = "left_rotate" type = "revolute">
		<parent link = "left_leading_edge"/>
		<child link = "left_wing"/>
		<origin xyz = "0 0 0" rpy = "0 0 0"/>
		<axis xyz = "0 1 0"/>
		<dynamics friction = "1E-8" damping = "1E-9"/>
		<limit lower = "-0.767944870877505" upper = "0.808087443673375" effort = "0.02" velocity = "2000"/>
	</joint>

	<joint name = "right_stroke" type = "revolute">
		<parent link = "torso"/>
		<child link = "right_leading_edge"/>
		<origin xyz = "0 -13.95E-3 23.7357E-3" rpy = "0 0 0"/>
		<axis xyz = "0 0 -1"/>
		<dynamics friction = "1E-9" damping = "8E-9"/>
		<limit lower = "-1.57" upper = "1.57" effort = "0.02" velocity = "400"/>
	</joint>

	<joint name = "right_rotate" type = "revolute">
		<parent link = "right_leading_edge"/>
		<child link = "right_wing"/>
		<origin xyz = "0 0 0" rpy = "0 0 0"/>
		<axis xyz = "0 1 0"/>
		<dynamics friction = "1E-8" damping = "1E-9"/>
		<limit lower = "-0.802851455917392" upper = "0.785398163397448" effort = "0.02" velocity = "2000"/>
	</joint>
</robot>
